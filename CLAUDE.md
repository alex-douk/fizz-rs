# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is an early-stage repository for a C++ implementation of components using the Fizz TLS1.3 library, whose mission is to show a fully functional working of RFC 9345, Delegated Credentials for TLS.
This project contains three components:

- `sidecar`: A certificate manager that generates delegated credentials for servers. The sidecar exposes HTTPS endpoints for both server registration (`/register`) and client verification (`/verify`).
- `server` : The server using the credentials generated by the sidecar. There is an HTTPS connection between the sidecar and the server to communicate the credentials.
- `client` : An end-client verifying the certificate and the credentials.


## Behavior specification

The expected behavior is the following:

1. The sidecar spawns
2. The server spawns
3. The server connects to the sidecar via HTTPS. It advertises its name to the sidecar.
4. The sidecar generates credentials for the server/name pair. It stores locally a mapping of the name -> credential mapping.
5. The server can now use the credentials for upcoming connections.
6. The client requests to the sidecar what are the valid credentials for a specific service name via HTTPS (note: even if this is unnecessary, it is important for an out-of-scope feature, so do not skip this step)
7. The sidecar replies with a publicly verifiable information regarding the credentials.
8. The client now connects to the server using TLS
9. The server replies with its TLS delegated credential
10. The client first verifies the certificate is valid, then verifies the credentials using the information from step 7.

## Current Structure

- `text_docs/`: Documentation directory
  - `rfc_9345.md`: RFC 9345 reference (currently empty)
- `include`: Directory containing all `.h` header files
- `src`: Source code directory
  - `client`: Client implementation
  - `sidecar`: Sidecar implementation
  - `server`: Server implementation
- `fizz`: TLS library (Fizz) to be used for the project.

## Notes

This repository is in its initial stages with minimal code present. The project structure and build system have not yet been established.
- As per the specification in CLAUDE.md, you have implemented the sidecar as well as a certificate generation util.
- After every substantial code modification, you should call the documentation generation tool to update the documentation. Cosmetic changes to code (such as comments, or modularization) should not trigger a documentation update.